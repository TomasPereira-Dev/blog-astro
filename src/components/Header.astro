---
import MobileMenu from "./MobileMenu.astro";
---

<header class="relative z-50 top-2 right-[1%] flex items-center justify-between p-2 w-[102%] bg-[#201F1D] border border-white/25 rounded-lg">
        <div>
            <a href="/"><img class="rounded-lg" width="36" height="36" src="./image-avatar.jpg" alt="un retrato de tomas pereira"></a>
        </div>
    
        <div class="flex gap-4">
            <nav class="hidden lg:flex items-center gap-4">
                <a class="text-white hover:underline hover:underline-offset-6 hover:decoration-3 hover:decoration-sky-400"  href="/">Home</a>
                <a class="text-white hover:underline hover:underline-offset-6 hover:decoration-3 hover:decoration-sky-400" href="/articles">Articles</a>
                <a class="text-white hover:underline hover:underline-offset-6 hover:decoration-3 hover:decoration-sky-400 " href="/about">About</a>
            </nav>
            <div >
                <button aria-pressed="false" class="p-2 rounded-lg menu-button md:hidden hover:cursor-pointer">
                    <svg role="img" class="w-[1.125rem] h-[1.125rem] menu-hamburger-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="18" height="18"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="#fefefe" stroke="#fefefe" d="M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"/></svg>
                    <svg role="img" class="hidden w-[1.125rem] h-[1.125rem] menu-close-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path stroke="#FEFEFE" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 5 5 15M5 5l10 10"/></svg>
                </button>
                <button aria-pressed="false" class="p-2 border bg-dark border-white/25 rounded-lg theme-button hover:cursor-pointer hover:bg-black/25 dark:bg-[#FBF9F7] dark:border-[#e7e6e4]">
                    <svg role="img" class="darkmode-on-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 18 18"><path stroke="#FEFEFE" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 2.055v1.39m0 11.11v1.39M3.444 9H2.056M5.052 5.05l-.983-.982m8.88.982.982-.982m-8.88 8.882-.982.982m8.88-.982.982.982M15.945 9h-1.39m-2.083 0a3.472 3.472 0 1 1-6.944 0 3.472 3.472 0 0 1 6.944 0Z"/></svg>
                    <svg role="img" class="hidden w-[1.125rem] h-[1.125rem] darkmode-off-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 18 18"><path stroke="#1C1A19" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15.913 9.664a5.556 5.556 0 1 1-7.577-7.577 6.945 6.945 0 1 0 7.577 7.577Z"/></svg>
                </button>
            </div>
        </div>
        <MobileMenu />
</header>

<script>
    const menuButton = document.querySelector(".menu-button") as HTMLButtonElement;
    const themeButton = document.querySelector(".theme-button") as HTMLButtonElement;
    const menuComponent = document.querySelector(".menu-component") as HTMLDivElement;
    const menuCloseIcon = document.querySelector(".menu-close-icon") as SVGElement;
    const hamburgerIcon = document.querySelector(".menu-hamburger-icon") as SVGElement;
    const darkmodeOffIcon = document.querySelector(".darkmode-off-icon") as SVGElement;
    const darkmodeOnIcon = document.querySelector(".darkmode-on-icon") as SVGElement;
    const htmlTag = document.querySelector("html") as HTMLElement;
    

    const temp = localStorage.getItem("darkMode")!;
    htmlTag.classList.toggle(temp);
    if(temp){
        darkmodeOffIcon.classList.toggle("hidden");
        darkmodeOnIcon.classList.toggle("hidden");
    }
    

    let themeAriaFlag = false;
    let menuAriaFlag = false;

    menuButton.addEventListener("click", () => {
        menuAriaFlag = !menuAriaFlag;
        menuButton.ariaPressed = `${menuAriaFlag}`;
        menuButton.classList.toggle("menu-open");
        menuComponent.classList.toggle("hidden");
        menuCloseIcon.classList.toggle("hidden");
        hamburgerIcon.classList.toggle("hidden");
    });

    themeButton.addEventListener("click", () => {
        themeAriaFlag = !themeAriaFlag;
        themeButton.ariaPressed = `${themeAriaFlag}`;
        darkmodeOffIcon.classList.toggle("hidden");
        darkmodeOnIcon.classList.toggle("hidden");
        htmlTag.classList.toggle("dark");

        temp ? localStorage.removeItem("darkMode") : localStorage.setItem("darkMode", "dark");
        
    })
</script>
